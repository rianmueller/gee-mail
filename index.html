<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				
				//display date, subject, sender from window.geemails variable, create a div for each message

for(i = 0; i < window.geemails.length; i++){
	var messageHeader = document.createElement('div');
	messageHeader.className = 'messageHeaders';
	messageHeader.innerHTML = window.geemails[i].sender + ' ' + window.geemails[i].subject + ' ' + window.geemails[i].date;
	main.appendChild(messageHeader);

	messageHeader.addEventListener('click', showHideBody);

	var messageBody = document.createElement('div');
	messageBody.className = 'messageBodies';
	messageBody.innerHTML = window.geemails[i].body;
	messageHeader.appendChild(messageBody);

	counter.innerHTML = 'Messages: ' + window.geemails.length;
}

function addNewMessage(){
	var newMessage = getNewMessage();
	window.geemails.push(newMessage);
	
	var messageHeader = document.createElement('div');
	messageHeader.className = 'messageHeaders';
	messageHeader.innerHTML = newMessage.sender + ' ' + newMessage.subject + ' ' + newMessage.date;
	main.appendChild(messageHeader);

	messageHeader.addEventListener('click', showHideBody);

	var messageBody = document.createElement('div');
	messageBody.className = 'messageBodies';
	messageBody.innerHTML = newMessage.body;
	messageHeader.appendChild(messageBody);
	counter.innerHTML = 'Messages: ' + window.geemails.length;
}
//function contains a lot of duplicate code - is there a good way to simplify and avoid duplicaton?

setInterval(addNewMessage, 1000)

function showHideBody(){
	var messageClick = this.querySelector('.messageBodies');
	if(messageClick.style.display === 'block'){
		messageClick.style.display = 'none';
	}else{
		messageClick.style.display = 'block';
	}
}

      };
    </script>
	</head>
	<body>
		<header>
			<div class="header" id="head">
				<h1 id="logo">Gee-mail</h1>
				<h2 id="counter"></h2>
			</div>
		</header>
		<div class="container" id="main"></div>
	</body>
</html>