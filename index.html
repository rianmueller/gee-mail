<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				
				//display date, subject, sender from window.geemails variable, create a div for each message

for(i = 0; i < window.geemails.length; i++){
	var messageHeader = document.createElement('div');
	messageHeader.className = 'messageHeaders';
	messageHeader.innerHTML = window.geemails[i].date + window.geemails[i].sender + window.geemails[i].subject;
	main.appendChild(messageHeader);

	messageHeader.addEventListener('click', showHideBody);

	var messageBody = document.createElement('div');
	messageBody.className = 'messageBodies';
	messageBody.innerHTML = window.geemails[i].body;
	messageBody.style.display = 'none';
	//Why doesn't the CSS work instead?
	messageHeader.appendChild(messageBody);
}

function showHideBody(){
	var messageClick = this.querySelector('.messageBodies');
	if(messageClick.style.display === 'block'){
		messageClick.style.display = 'none';
	}else{
		messageClick.style.display = 'block';
	}
}

counter.innerHTML = window.geemails.length;

console.log(window.geemails);
function addNewMessage(){
	var newMessage = {
		date: getNewMessage().date,
		sender: getNewMessage().sender,
		subject: getNewMessage().subject,
		body: getNewMessage().body
	};
	window.geemails.push(newMessage);
	
	var messageHeader = document.createElement('div');
	messageHeader.className = 'messageHeaders';
	messageHeader.innerHTML = getNewMessage().date + getNewMessage().sender + getNewMessage().subject;
	main.appendChild(messageHeader);

	messageHeader.addEventListener('click', showHideBody);

	var messageBody = document.createElement('div');
	messageBody.className = 'messageBodies';
	messageBody.innerHTML = getNewMessage().body;
	messageBody.style.display = 'none';
	//Why doesn't the CSS work instead?
	messageHeader.appendChild(messageBody);
	counter.innerHTML = window.geemails.length;
}
//function contains a lot of duplicate code - is there a good way to simplify and avoid duplicaton?

setInterval(addNewMessage, 1000)

      };
    </script>
	</head>
	<body>
		<header>
			<div class="header" id="head">
				<div id="logo">Gee-mail</div>
				<div id="counter"></div>
			</div>
		</header>
		<div class="container" id="main">
			Build Me!
		</div>
	</body>
</html>